<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
        <script src="jquery.js"></script>
        <title>My news</title>
        <style>
            .modal{
                display:none;
                position: fixed;
                overflow: auto;
                width: 100%;
                height: 100%;
                top:0;
                left:0;
                padding-top: 100px;
                z-index: 1;
                background-color: rgba(0,0,0,0.4);
            };
        </style>
    </head>
    <body>
        <nav class="navbar navbar-primary">
            <div class="container-fluid" style ="overflow: auto;">
                <div class="navbar-header">
                  <a class="navbar-brand" href="#" style="font-size:200%;">My News</a>
                </div>
                <ul class="nav navbar-nav">
                  <li><a id= "top-headlines" href="#">Top Headlines</a></li>
                  <li><a id="business" href="#">Business</a></li>
                  <li><a id="entertainment" href="#">Entertainment</a></li>
                  <li><a id="sports" href="#">Sports</a></li>
                  <li><a id="science" href="#">Science</a></li>
                </ul>
                <button id="search" class = "btn btn-info form-inline" style="float:right;"><img style="width:30px;" src="search.png" alt="Search"></button>
            </div>
        </nav>
        <section>
            <ul id="newslist" style="width:100%; margin:0; padding:0;">
            </ul>
        </section>
        <div class="modal">
            <div class="modal-content" style="width:60%; margin:auto; background-color: white; padding: 1%;">
                <p style="display:inline;">Keywords: </p><input id="searchtext" style="width:30%;" type="text">
                <button id="find">Search</button>
                <span class="close">&times;</span>
            </div>
        </div>
        <script>
            $(document).ready(function(){
            fetch("https://gnews.io/api/v4/top-headlines?&token=e78efdc7f2dc5dd4c842e3772a0f57c4")
                .then(function (response) {
                return response.json();
                })
                .then(function (data) {
                    console.log(data);
                    var news = '';
                    for (let i=0; i< data.articles.length; i++){
                    news += `<li class="row list-unstyled" style="margin-top:2%;">
                        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                        <img class="img-fluid" style= "width:92%; display:block; height: auto; margin-left: auto; margin-right: auto;" 
                        src= ${data.articles[i].image} alt="Image can not be loaded">
                        </div>
                        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
                            <h2 style="margin: 10px 3%"><a href = ${data.articles[i].url} target="_blank">${data.articles[i].title}</a></h2>
                            <p style="margin: 1% 3%;"><em>${data.articles[i].publishedAt}</em></p>
                            <p style="margin: 1% 3%;">${data.articles[i].description}</p>
                        </div>
                        </li>`;
                    };
                    $("#newslist").append(news);
                });
            $("#business").click(function(){
                fetch("https://gnews.io/api/v4/top-headlines?topic=business&token=e78efdc7f2dc5dd4c842e3772a0f57c4")
                .then(function (response) {
                return response.json();
                })
                .then(function (data) {
                    console.log(data);
                    var news = '';
                    for (let i=0; i< data.articles.length; i++){
                    news += `<li class="row list-unstyled" style="margin-top:2%;">
                        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                        <img class="img-fluid" style= "width:92%; display:block; height: auto; margin-left: auto; margin-right: auto;" 
                        src= ${data.articles[i].image} alt="Image can not be loaded">
                        </div>
                        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
                            <h2 style="margin: 10px 3%"><a href = ${data.articles[i].url} target="_blank">${data.articles[i].title}</a></h2>
                            <p style="margin: 1% 3%;"><em>${data.articles[i].publishedAt}</em></p>
                            <p style="margin: 1% 3%;">${data.articles[i].description}</p>
                        </div>
                        </li>`;
                        };
                        $("#newslist").empty();
                        $("#newslist").append(news);
                    });
                });
            $("#entertainment").click(function(){
                fetch("https://gnews.io/api/v4/top-headlines?topic=entertainment&token=e78efdc7f2dc5dd4c842e3772a0f57c4")
                .then(function (response) {
                return response.json();
                })
                .then(function (data) {
                    console.log(data);
                    var news = '';
                    for (let i=0; i< data.articles.length; i++){
                    news += `<li class="row list-unstyled" style="margin-top:2%;">
                        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                        <img class="img-fluid" style= "width:92%; display:block; height: auto; margin-left: auto; margin-right: auto;" 
                        src= ${data.articles[i].image} alt="Image can not be loaded">
                        </div>
                        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
                            <h2 style="margin: 10px 3%"><a href = ${data.articles[i].url} target="_blank">${data.articles[i].title}</a></h2>
                            <p style="margin: 1% 3%;"><em>${data.articles[i].publishedAt}</em></p>
                            <p style="margin: 1% 3%;">${data.articles[i].description}</p>
                        </div>
                        </li>`;
                        };
                        $("#newslist").empty();
                        $("#newslist").append(news);
                    });
                });
            $("#sports").click(function(){
                fetch("https://gnews.io/api/v4/top-headlines?topic=sports&token=e78efdc7f2dc5dd4c842e3772a0f57c4")
                .then(function (response) {
                return response.json();
                })
                .then(function (data) {
                    console.log(data);
                    var news = '';
                    for (let i=0; i< data.articles.length; i++){
                    news += `<li class="row list-unstyled" style="margin-top:2%;">
                        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                        <img class="img-fluid" style= "width:92%; display:block; height: auto; margin-left: auto; margin-right: auto;" 
                        src= ${data.articles[i].image} alt="Image can not be loaded">
                        </div>
                        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
                            <h2 style="margin: 10px 3%"><a href = ${data.articles[i].url} target="_blank">${data.articles[i].title}</a></h2>
                            <p style="margin: 1% 3%;"><em>${data.articles[i].publishedAt}</em></p>
                            <p style="margin: 1% 3%;">${data.articles[i].description}</p>
                        </div>
                        </li>`;
                        };
                        $("#newslist").empty();
                        $("#newslist").append(news);
                    });
                });
            $("#science").click(function(){
                fetch("https://gnews.io/api/v4/top-headlines?topic=science&token=e78efdc7f2dc5dd4c842e3772a0f57c4")
                .then(function (response) {
                return response.json();
                })
                .then(function (data) {
                    console.log(data);
                    var news = '';
                    for (let i=0; i< data.articles.length; i++){
                    news += `<li class="row list-unstyled" style="margin-top:2%;">
                        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                        <img class="img-fluid" style= "width:92%; display:block; height: auto; margin-left: auto; margin-right: auto;" 
                        src= ${data.articles[i].image} alt="Image can not be loaded">
                        </div>
                        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
                            <h2 style="margin: 10px 3%"><a href = ${data.articles[i].url} target="_blank">${data.articles[i].title}</a></h2>
                            <p style="margin: 1% 3%;"><em>${data.articles[i].publishedAt}</em></p>
                            <p style="margin: 1% 3%;">${data.articles[i].description}</p>
                        </div>
                        </li>`;
                        };
                        $("#newslist").empty();
                        $("#newslist").append(news);
                    });
                });
            $("#top-headlines").click(function(){
                fetch("https://gnews.io/api/v4/top-headlines?&token=e78efdc7f2dc5dd4c842e3772a0f57c4")
                .then(function (response) {
                return response.json();
                })
                .then(function (data) {
                    console.log(data);
                    var news = '';
                    for (let i=0; i< data.articles.length; i++){
                    news += `<li class="row list-unstyled" style="margin-top:2%;">
                        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                        <img class="img-fluid" style= "width:92%; display:block; height: auto; margin-left: auto; margin-right: auto;" 
                        src= ${data.articles[i].image} alt="Image can not be loaded">
                        </div>
                        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
                            <h2 style="margin: 10px 3%"><a href = ${data.articles[i].url} target="_blank">${data.articles[i].title}</a></h2>
                            <p style="margin: 1% 3%;"><em>${data.articles[i].publishedAt}</em></p>
                            <p style="margin: 1% 3%;">${data.articles[i].description}</p>
                        </div>
                        </li>`;
                        };
                        $("#newslist").empty();
                        $("#newslist").append(news);
                    });
                });
            $("#search").click(function(){
                $(".modal").attr("style","display:block;");
            });
            $(".close").click(function(){
                $(".modal").attr("style","display:none;");
            });
            $("#find").click(function(){
                $(".modal").attr("style","display:none;");
                fetch(`https://gnews.io/api/v4/search?q=${$("#searchtext").val()}&token=e78efdc7f2dc5dd4c842e3772a0f57c4`)
                .then(function (response) {
                return response.json();
                })
                .then(function (data) {
                    console.log(data);
                    var news = '';
                    for (let i=0; i< data.articles.length; i++){
                    news += `<li class="row list-unstyled" style="margin-top:2%;">
                        <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                        <img class="img-fluid" style= "width:92%; display:block; height: auto; margin-left: auto; margin-right: auto;" 
                        src= ${data.articles[i].image} alt="Image can not be loaded">
                        </div>
                        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
                            <h2 style="margin: 10px 3%"><a href = ${data.articles[i].url} target="_blank">${data.articles[i].title}</a></h2>
                            <p style="margin: 1% 3%;"><em>${data.articles[i].publishedAt}</em></p>
                            <p style="margin: 1% 3%;">${data.articles[i].description}</p>
                        </div>
                        </li>`;
                        };
                        $("#newslist").empty();
                        $("#newslist").append(news);
                    });
                $("#searchtext").val("");
            });
        });
    
        </script>
    </body>
</html>